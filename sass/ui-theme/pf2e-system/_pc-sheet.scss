/* ----------------------------------------- */
/* Colorized sidebar                         */
/* ----------------------------------------- */
[data-dorako-ui-theme] {
  // prettier-ignore
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.action .item-summary,
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.strike .item-summary,
  &.sheet.party [data-tab=overview] .summary,
  &.sheet.party [data-tab=exploration] .activities .member-activity,
  &.sheet.party [data-tab=aftermath] .activities .member-activity,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .attributes .attribute h3.modifier,
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions .actions-container .actions-tabs-wrapper .actions-panels ol.actions-list li.action.expanded .item-summary,
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions .actions-container .actions-tabs-wrapper .actions-panels .actions-options,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.crafting .crafting-options,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .proficiencies-pane .skills-list .skill,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .proficiencies-pane .lores-list .skill,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .proficiencies-pane .combat-list .skill,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .ability-scores .ability,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .ability-scores .ability h3.ability-mod,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .attribute-modifiers .attribute,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .attribute-modifiers .attribute h3.attribute-mod {
    border-image-source: var(--ornamentation);
  }
}

/* ----------------------------------------- */
/* PC Sheet Theme                            */
/* ----------------------------------------- */
[data-dorako-ui-theme][data-theme-color] {
  --ornamentation: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='33' height='33' overflow='scroll'%3E%3Cstyle%3E.st1%7Bstroke:%23231f20;stroke-miterlimit:10%7D.st1,.st2%7Bfill:none%7D%3C/style%3E%3Cg opacity='.25'%3E%3Cpath class='st1' d='M.5 20v-7'/%3E%3Cpath class='st2' d='M13 20v-7'/%3E%3Cpath class='st1' d='M13 .5h7'/%3E%3Cpath class='st2' d='M13 13h7'/%3E%3Cpath class='st1' d='M32.5 13v7'/%3E%3Cpath class='st2' d='M20 13v7'/%3E%3Cpath class='st1' d='M20 32.5h-7'/%3E%3Cpath class='st2' d='M20 20h-7'/%3E%3Cg%3E%3Cpath class='st1' d='M.5.5h3.1v3.1H.5zM3.6 3.6h3.1v3.1H3.6zM6.8 3.6h3.1v3.1H6.8zM3.6 6.8h3.1v3.1H3.6zM3.6 6.8H.5V13M13 .5H6.8v3.1'/%3E%3C/g%3E%3Cg%3E%3Cpath class='st1' d='M29.4.5h3.1v3.1h-3.1zM26.3 3.6h3.1v3.1h-3.1zM26.3 6.8h3.1v3.1h-3.1zM23.1 3.6h3.1v3.1h-3.1zM26.3 3.6V.5H20'/%3E%3Cpath class='st1' d='M32.5 13V6.8h-3.1'/%3E%3C/g%3E%3Cg%3E%3Cpath class='st1' d='M29.4 29.4h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M26.3 26.3h3.1v3.1h-3.1zM23.1 26.3h3.1v3.1h-3.1zM26.3 23.1h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M29.4 26.3h3.1V20M20 32.5h6.3v-3.1'/%3E%3C/g%3E%3Cg%3E%3Cpath class='st1' d='M.5 29.4h3.1v3.1H.5zM3.6 26.3h3.1v3.1H3.6zM3.6 23.1h3.1v3.1H3.6zM6.8 26.3h3.1v3.1H6.8z'/%3E%3Cpath class='st1' d='M6.8 29.4v3.1H13M.5 20v6.3h3.1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  &.actor.sheet .crb-style .sheet-body .sheet-content ol.directory-list .action-header {
    background: var(--theme-color);
  }
  &.actor.sheet .inventory .container-metadata .container-capacity .container-capacity-bar,
  &.actor.sheet .inventory .encumbrance .encumbrance-bar {
    background: var(--theme-color);
  }
  &.actor.sheet .inventory .encumbrance.over-limit .encumbrance-bar {
    background: var(--theme-color-light) !important; // system important
  }
  &.actor.sheet .blue-button {
    background: var(--theme-color-light) !important;
  }

  // Vehicle Sheet
  &.actor.sheet .crb-style .stroke-header svg {
    fill: none;
  }
}

[data-dorako-ui-theme] {
  &.actor.sheet[data-theme-color="red"],
  &.actor.sheet[data-theme-color="green"],
  &.actor.sheet[data-theme-color="blue"],
  &.actor-sheet[data-theme-color="purple"],
  &.actor-sheet[data-theme-color="black"] {
    .inventory .item-summary {
      background: color-mix(in srgb, var(--theme-color) 25%, transparent);
    }
  }

  &.actor.sheet[data-theme-color="red"] {
    --theme-color-light: var(--primary-light);
    --theme-color: var(--primary);
    --theme-color-dark: var(--primary-dark);

    .crb-style {
      --header: url("../img/red-header.webp");
      background-image: url("../img/red-header.webp"), var(--sheet);
    }
  }

  &.actor.sheet[data-theme-color="blue"] {
    --color-scrollbar: var(--secondary-light);
    --color-scrollbar-border: var(--tertiary);
    --color-scrollbar-hover: var(--theme-color-light);
    --theme-color-dark: var(--secondary-dark);
    --theme-color: var(--secondary);
    --theme-color-light: var(--secondary-light);
    .crb-style {
      --header: url("../img/blue-header.webp");
      background-image: url("../img/blue-header.webp"), var(--sheet);

      aside {
        background-image: url("../img/blue-sidebar-top.webp"), url("../img/blue-sidebar-bottom.webp");
        .logo {
          filter: grayscale(0.6);
        }
        .sidebar {
          .hitpoints .hp-big .container.current-hp {
            background-image: linear-gradient(
              90deg,
              var(--theme-color) 0%,
              var(--theme-color-light) 50%,
              var(--theme-color) 100%
            );
            background-color: var(--secondary);
          }
          .armor-class .shield.hp {
            background: url("../img/blue-shield.webp") no-repeat top center;
          }
          .initiative-select select {
            background-color: var(--theme-color);
          }
        }
      }

      header.char-header .char-level .level {
        background: url("../img/blue-level-badge.webp") no-repeat;
      }

      nav.sheet-navigation {
        background: var(--theme-color-light);

        .item:hover,
        .item.active {
          background-image: url("../img/blue-nav-item.webp");
        }
      }
    }
  }

  &.actor.sheet[data-theme-color="green"] {
    --color-scrollbar: var(--remaster-light);
    --color-scrollbar-border: var(--tertiary);
    --color-scrollbar-hover: var(--theme-color-light);
    --theme-color-dark: var(--remaster-dark);
    --theme-color: var(--remaster);
    --theme-color-light: var(--remaster-light);
    .crb-style {
      --header: url("../img/green-header.webp");
      background-image: url("../img/green-header.webp"), var(--sheet);

      aside {
        background-image: url("../img/green-sidebar-top.webp"), url("../img/green-sidebar-bottom.webp");
        .logo {
          filter: grayscale(0.6);
        }
        .sidebar {
          .hitpoints .hp-big .container.current-hp {
            background-image: linear-gradient(
              90deg,
              var(--remaster) 0%,
              var(--remaster-light) 50%,
              var(--remaster) 100%
            );
            background-color: var(--theme-color);
          }
          .armor-class .shield.hp {
            background: url("../img/blue-shield.webp") no-repeat top center;
          }
          .initiative-select select {
            background-color: var(--theme-color);
          }
        }
      }

      header.char-header .char-level .level {
        background: url("../img/blue-level-badge.webp") no-repeat;
      }

      nav.sheet-navigation {
        background: var(--theme-color-light);

        .item:hover,
        .item.active {
          background-image: url("../img/green-nav-item.webp");
        }
      }
    }
  }

  &.actor.sheet[data-theme-color="purple"] {
    --theme-color-dark: #3b0062;
    --theme-color: #520982;
    --theme-color-light: rgb(107, 29, 137);
    --color-scrollbar-hover: var(--theme-color-light);
    --color-scrollbar: var(--theme-color);
    --color-scrollbar-border: var(--tertiary);
    .crb-style {
      --header: url("../img/purple-header.webp");
      background-image: url("../img/purple-header.webp"), var(--sheet);

      aside {
        background-image: url("../img/purple-sidebar-top.webp"), url("../img/purple-sidebar-bottom.webp");
        .logo {
          filter: grayscale(0.6);
        }
        .sidebar {
          .hitpoints .hp-big .container.current-hp {
            background-image: linear-gradient(
              90deg,
              var(--theme-color) 0%,
              var(--theme-color-light) 50%,
              var(--theme-color) 100%
            );
            background-color: var(--theme-color);
          }
          .armor-class .shield.hp {
            background: url("../img/blue-shield.webp") no-repeat top center;
          }
          .initiative-select select {
            background-color: var(--theme-color);
          }
        }
      }

      header.char-header .char-level .level {
        background: url("../img/blue-level-badge.webp") no-repeat;
      }

      nav.sheet-navigation {
        background: var(--theme-color-light);

        .item:hover,
        .item.active {
          background-image: url("../img/blue-nav-item.webp");
        }
      }
    }
  }

  &.actor.sheet[data-theme-color="black"] {
    --theme-color-dark: black;
    --theme-color: #111;
    --theme-color-light: #222;
    --color-scrollbar: var(--theme-color);
    --color-scrollbar-border: var(--tertiary);
    --color-scrollbar-hover: var(--theme-color-light);
    .crb-style {
      --header: url("../img/black-header.webp");
      background-image: url("../img/green-header.webp"), var(--sheet);

      aside {
        background-image: url("../img/black-sidebar-top.webp"), url("../img/black-sidebar-bottom.webp");
        .logo {
          filter: grayscale(0.6);
        }
        .sidebar {
          .hitpoints .hp-big .container.current-hp {
            background-image: linear-gradient(
              90deg,
              var(--theme-color) 0%,
              var(--theme-color-light) 50%,
              var(--theme-color) 100%
            );
            background-color: var(--theme-color);
          }
          .armor-class .shield.hp {
            background: url("../img/blue-shield.webp") no-repeat top center;
          }
          .initiative-select select {
            background-color: var(--theme-color);
          }
        }
      }

      header.char-header .char-level .level {
        background: url("../img/blue-level-badge.webp") no-repeat;
      }

      nav.sheet-navigation {
        background: var(--theme-color-light);

        .item:hover,
        .item.active {
          background-image: url("../img/blue-nav-item.webp");
        }
      }
    }
  }
}

[data-dorako-ui-theme][data-dorako-ui-scope="limited"] {
  &.actor.sheet .crb-style {
    background: unset;
    background: var(--header), transparent !important;
    background-repeat: repeat-x, no-repeat !important;
    background-size: auto 89px, cover !important;
    background-attachment: local !important;
  }

  &[data-theme-color="red"].sheet.actor.window-app.vehicle .window-header,
  &[data-theme-color="red"].sheet.actor.window-app.character .window-header {
    background: #5a0c02;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
  }

  &[data-theme-color="green"].sheet.actor.window-app.vehicle .window-header,
  &[data-theme-color="green"].sheet.actor.window-app.character .window-header {
    background: #0e2a1a;
  }

  &[data-theme-color="blue"].sheet.actor.window-app.vehicle .window-header,
  &[data-theme-color="blue"].sheet.actor.window-app.character .window-header {
    background: #1a1e5f;
  }

  &[data-theme-color="purple"].sheet.actor.window-app.vehicle .window-header,
  &[data-theme-color="purple"].sheet.actor.window-app.character .window-header {
    background: #340c5b;
  }

  &[data-theme-color="black"].sheet.actor.window-app.vehicle .window-header,
  &[data-theme-color="black"].sheet.actor.window-app.character .window-header {
    background: #151515;
  }

  &.sheet.actor.window-app.minimized .window-header {
    border-radius: var(--border-radius);
  }
}

[data-dorako-ui-theme] {
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .skills-list .skill .skill-score,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .lores-list .skill .skill-score,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .combat-list .skill .skill-score {
    color: var(--accent-color);
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .lores-list .skill input,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .combat-list .skill input {
    // --text-dark: var(--color-light-1);
  }
}

/* ----------------------------------------- */
/* Theme                                     */
/* ----------------------------------------- */
[data-dorako-ui-theme][data-dorako-ui-scope="limited"]:not([data-dorako-ui-theme^="crb"][data-color-scheme="light"]) {
  --color-text-dark-4: var(--color-light-5);

  &.actor.sheet .crb-style .sheet-body {
    background: unset;

    input[type="number"] {
      @include f2-input;
    }
    select:not(.pf-rank, .modular) {
      @include f2-input;
    }

    .details-label,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      --primary: var(--color-light-2);
    }
  }

  button.daily-crafting {
    @include f2-button-warm;
    --button-background-color: var(--color-warm-1);
    --button-border-color: var(--color-cool-5);
    --button-text-color: var(--color-cool-5);
    --button-hover-background-color: #fda948;
    --button-hover-border-color: var(--color-warm-2);
    --button-hover-text-color: #000000;
    text-shadow: none;

    &.disabled,
    &:disabled {
      --button-background-color: var(--color-cool-4);
      --button-hover-background-color: var(--color-cool-4);
      --button-text-color: var(--color-light-5);
      --button-hover-text-color: var(--color-light-5);
      --button-hover-border-color: transparent;
    }

    &:not(.disabled, :disabled):hover {
      --button-hover-background-color: #cb7f27;
      --button-hover-border-color: var(--color-warm-1);
    }
  }

  // prettier-ignore
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.strike .alt-usage .alt-usage-icon[src$="svg"] {
    filter: invert(1);  
  }

  // prettier-ignore
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .character-details .abcd img.deity-emblem,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .character-details .pc_deity img.symbol {
    background: var(--color-warm-4);
    border: 1px solid var(--color-warm-3);
    box-shadow: 0px 0px 0px 1px var(--color-warm-3), var(--box-shadow);
  }

  &.sheet.actor .crb-style nav.sub-nav {
    background: unset;
    box-shadow: unset;
    a,
    .tab {
      @include f2-button-warm;
      font-family: var(--font-primary);

      &.active {
        font-weight: unset;
      }
    }
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .item-image:hover i {
    background: var(--color-warm-2);
    color: var(--color-light-1);
    text-shadow: 0px 1px 2px black;
    border-radius: 2px;
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .lores-list .skill input,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .combat-list .skill input {
    @include f2-input;
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.biography {
    section input {
      @include f2-input;
    }
    .editor {
      @include f2-input;
      height: auto;
      .tox.tox-tinymce {
        background: white;
      }
    }
  }

  &.actor.sheet.character .crb-style.locked.limited .sheet-body .sheet-content .tab.biography {
    section input,
    .editor {
      --input-text-color: var(--color-light-3);
      --input-focus-text-color: var(--color-light-3);
      --input-background-color: transparent;
      --input-border-color: transparent;
      --input-focus-outline-color: transparent;
      --box-shadow: transparent;

      &:hover {
        outline-color: transparent;
      }
    }
  }

  &.actor.sheet .crb-style .sheet-body .sheet-content ol.spell-list > li.spell-level-header input,
  &.actor.sheet .crb-style .sheet-body .sheet-content ol.spell-list > li .uses input {
    @include f2-input;
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .pc h3 {
    @include f2-input;
    padding: 0.5em 0.25em;
    &:hover {
      outline: 0px transparent !important;
    }
  }

  .crb-style .details-input {
    @include f2-input;
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.actions button.activate,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.actions button.activate {
    @include f2-button-warm;
  }

  &.actor.sheet .crb-style aside .sidebar .tags .tag.edit-btn {
    background: #dad8cc;
  }

  //prettier-ignore
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.spellcasting .spellcasting-entry .rollable .d20-svg {
    filter: invert(1);
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .character-details .alignment select {
    --input-text-color: black;
    --input-background-color: transparent;
    --input-border-color: transparent;
    --box-shadow: transparent;
    color: black;
  }
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.character .attributes .attribute .label {
    opacity: unset;
    color: var(--color-light-5);
  }

  &.actor.sheet .inventory .list-row .item-controls .item-control.toggle-invested,
  &.actor.sheet .inventory .list-row .item-controls .item-control.item-carry-type {
    // Do system PR to fix this constant
  }

  //prettier-ignore
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .skills-list .skill .button-group h6:hover,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .lores-list .skill .button-group h6:hover,
  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.proficiencies .combat-list .skill .button-group h6:hover {
    --primary: var(--color-warm-2);
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.effects .effects-list .item,
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.action,
  &.actor.sheet .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.strike {
    border-image: linear-gradient(90deg, transparent, var(--color-warm-2) 20%, transparent) 1;
  }

  &.actor.sheet.character .crb-style .sheet-body .sheet-content .tab.actions ol.actions-list li.strike {
    --text-dark: black;
    --primary: var(--color-warm-2);
    .button-group {
      button {
        --primary: var(--system-primary);
        --secondary: var(--system-secondary);
      }
    }
  }

  .attack-popout {
    select {
      @include f2-input;
    }
  }

  &.actor.sheet.character .attack-popout.actions ol.actions-list li.strike .item-name .item-image {
    flex: 0 0 32px;
  }
}

[data-dorako-ui-theme],
[data-dorako-ui-scope="limited"] {
  &.spellcasting-entry.preparation ol.spell-list > li.spell-level-header,
  &.actor.sheet .crb-style .sheet-body .sheet-content ol.spell-list > li.spell-level-header {
    background: var(--color-cool-5-75);
  }
  &.spellcasting-entry.preparation {
    --color-border-light-2: var(--color-cool-4);
  }
}
