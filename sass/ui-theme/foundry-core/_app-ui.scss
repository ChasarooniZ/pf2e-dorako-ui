/* ----------------------------------------- */
/* FPS display                               */
/* ----------------------------------------- */

#fps[data-dorako-ui-theme] {
  @include f2-app;
}

/* ----------------------------------------- */
/* Tooltip                                   */
/* ----------------------------------------- */

#tooltip[data-dorako-ui-theme] {
  background: var(--app-background);
  border: 1px solid var(--color-warm-1);
  box-shadow: 0px 0px 6px var(--color-warm-2), 0px 2px 8px 1px var(--color-warm-3);
  backdrop-filter: blur(5px);
  border-radius: var(--border-radius);
  -webkit-backdrop-filter: blur(5px);
  font-size: var(--font-size-16);
  line-height: var(--font-size-16);
  text-shadow: 0px 1px 2px black;
  padding: 0.4em 0.6em;
}

/* ----------------------------------------- */
/* Players                                   */
/* ----------------------------------------- */

#players[data-dorako-ui-theme] {
  @include f2-app;

  h3 {
    cursor: pointer;
    @include quick-transition;
    color: var(--color-light-3);

    &:hover {
      color: var(--color-light-1);
      text-shadow: 0px 0px 8px var(--color-shadow-highlight);
    }
  }
}

/* ----------------------------------------- */
/* Context menu                              */
/* ----------------------------------------- */

[data-dorako-ui-theme] #context-menu {
  @include f2-tooltip;
  li.context-item {
    &:first-child {
      border-top-left-radius: var(--border-radius);
      border-top-right-radius: var(--border-radius);
    }
    &:last-child {
      border-bottom-left-radius: var(--border-radius);
      border-bottom-right-radius: var(--border-radius);
    }
    &:hover {
      box-shadow: 0px 0px 0px 1px var(--color-warm-1);
      background: var(--color-warm-2);
      text-shadow: 0px 1px 2px black;
    }
  }
}

/* ----------------------------------------- */
/* Map v1 styling to v2 values               */
/* ----------------------------------------- */

[data-dorako-ui-theme] {
  --color-shadow-primary: transparent;
  --color-shadow-highlight: transparent;
  --color-bg-option: var(--input-background-color); // select dropdown
}

/* ----------------------------------------- */
/* limited scope specific                    */
/* ----------------------------------------- */

[data-dorako-ui-theme][data-dorako-ui-scope="limited"][data-color-scheme="dark"] {
  --rarity-common: #e1d8cf;
  --rarity-uncommon: #c45500;
  --rarity-rare: #5362ff;
  --rarity-unique: #e127e1;
  --ornamentation: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='33' height='33' overflow='scroll'%3E%3Cstyle%3E.st1{stroke:wheat;stroke-miterlimit:10}.st1,.st2{fill:none}%3C/style%3E%3Cg opacity='1'%3E%3Cpath class='st1' d='M.5 20v-7'/%3E%3Cpath class='st2' d='M13 20v-7'/%3E%3Cpath class='st1' d='M13 .5h7'/%3E%3Cpath class='st2' d='M13 13h7'/%3E%3Cpath class='st1' d='M32.5 13v7'/%3E%3Cpath class='st2' d='M20 13v7'/%3E%3Cpath class='st1' d='M20 32.5h-7'/%3E%3Cpath class='st2' d='M20 20h-7'/%3E%3Cpath class='st1' d='M.5.5h3.1v3.1H.5zm3.1 3.1h3.1v3.1H3.6zm3.2 0h3.1v3.1H6.8zM3.6 6.8h3.1v3.1H3.6zm0 0H.5V13M13 .5H6.8v3.1M29.4.5h3.1v3.1h-3.1zm-3.1 3.1h3.1v3.1h-3.1zm0 3.2h3.1v3.1h-3.1zm-3.2-3.2h3.1v3.1h-3.1zm3.2 0V.5H20M32.5 13V6.8h-3.1M29.4 29.4h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M26.3 26.3h3.1v3.1h-3.1zm-3.2 0h3.1v3.1h-3.1zm3.2-3.2h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M29.4 26.3h3.1V20M20 32.5h6.3v-3.1'/%3E%3Cg%3E%3Cpath class='st1' d='M.5 29.4h3.1v3.1H.5zm3.1-3.1h3.1v3.1H3.6zm0-3.2h3.1v3.1H3.6zm3.2 3.2h3.1v3.1H6.8zM6.8 29.4v3.1H13M.5 20v6.3h3.1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

/* ------------------------------------------------------------- */
/* Generalized style choices (inclusive of limited scope)        */
/* ------------------------------------------------------------- */

[data-dorako-ui-theme="bg3"],
[data-dorako-ui-theme="foundry2"],
[data-dorako-ui-theme][data-color-scheme="dark"] {
  // Dark theme
  --rarity-common: #e1d8cf;
  --rarity-uncommon: #c45500;
  --rarity-rare: #5362ff;
  --rarity-unique: #e127e1;
  --color-rarity-common: #e1d8cf;
  --color-rarity-uncommon: #c45500;
  --color-rarity-rare: #5362ff;
  --color-rarity-unique: #e127e1;
  --ornamentation: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='33' height='33' overflow='scroll'%3E%3Cstyle%3E.st1{stroke:wheat;stroke-miterlimit:10}.st1,.st2{fill:none}%3C/style%3E%3Cg opacity='1'%3E%3Cpath class='st1' d='M.5 20v-7'/%3E%3Cpath class='st2' d='M13 20v-7'/%3E%3Cpath class='st1' d='M13 .5h7'/%3E%3Cpath class='st2' d='M13 13h7'/%3E%3Cpath class='st1' d='M32.5 13v7'/%3E%3Cpath class='st2' d='M20 13v7'/%3E%3Cpath class='st1' d='M20 32.5h-7'/%3E%3Cpath class='st2' d='M20 20h-7'/%3E%3Cpath class='st1' d='M.5.5h3.1v3.1H.5zm3.1 3.1h3.1v3.1H3.6zm3.2 0h3.1v3.1H6.8zM3.6 6.8h3.1v3.1H3.6zm0 0H.5V13M13 .5H6.8v3.1M29.4.5h3.1v3.1h-3.1zm-3.1 3.1h3.1v3.1h-3.1zm0 3.2h3.1v3.1h-3.1zm-3.2-3.2h3.1v3.1h-3.1zm3.2 0V.5H20M32.5 13V6.8h-3.1M29.4 29.4h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M26.3 26.3h3.1v3.1h-3.1zm-3.2 0h3.1v3.1h-3.1zm3.2-3.2h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M29.4 26.3h3.1V20M20 32.5h6.3v-3.1'/%3E%3Cg%3E%3Cpath class='st1' d='M.5 29.4h3.1v3.1H.5zm3.1-3.1h3.1v3.1H3.6zm0-3.2h3.1v3.1H3.6zm3.2 3.2h3.1v3.1H6.8zM6.8 29.4v3.1H13M.5 20v6.3h3.1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

  /* Degrees of success */
  --degree-success-critical: rgb(107, 255, 0);
  --degree-success: rgb(0, 241, 255);
  --degree-failure: rgb(255, 129, 0);
  --degree-failure-critical: rgb(255, 0, 0);

  /* Value adjustments (e.g. weak/elite) */
  --adjusted-higher: #009988;
  --adjusted-lower: #cc3311;

  &.pf2e.item.sheet {
    --color-text-dark-2: var(--color-light-3);
    --color-text-dark-4: var(--color-light-3);
    --color-text-dark-input: var(--color-light-3);
    --color-border-dark: var(--color-light-2);
    --color-border-medium: var(--input-border-color);
  }
}

[data-dorako-ui-theme="crb"][data-color-scheme="light"] {
  // Dark theme
  --rarity-common: #323232;
  --rarity-uncommon: #98513d;
  --rarity-rare: #002664;
  --rarity-unique: #54166e;
  --color-rarity-common: #323232;
  --color-rarity-uncommon: #98513d;
  --color-rarity-rare: #002664;
  --color-rarity-unique: #54166e;
  --ornamentation: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='33' height='33' overflow='scroll'%3E%3Cstyle%3E.st1{stroke:wheat;stroke-miterlimit:10}.st1,.st2{fill:none}%3C/style%3E%3Cg opacity='1'%3E%3Cpath class='st1' d='M.5 20v-7'/%3E%3Cpath class='st2' d='M13 20v-7'/%3E%3Cpath class='st1' d='M13 .5h7'/%3E%3Cpath class='st2' d='M13 13h7'/%3E%3Cpath class='st1' d='M32.5 13v7'/%3E%3Cpath class='st2' d='M20 13v7'/%3E%3Cpath class='st1' d='M20 32.5h-7'/%3E%3Cpath class='st2' d='M20 20h-7'/%3E%3Cpath class='st1' d='M.5.5h3.1v3.1H.5zm3.1 3.1h3.1v3.1H3.6zm3.2 0h3.1v3.1H6.8zM3.6 6.8h3.1v3.1H3.6zm0 0H.5V13M13 .5H6.8v3.1M29.4.5h3.1v3.1h-3.1zm-3.1 3.1h3.1v3.1h-3.1zm0 3.2h3.1v3.1h-3.1zm-3.2-3.2h3.1v3.1h-3.1zm3.2 0V.5H20M32.5 13V6.8h-3.1M29.4 29.4h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M26.3 26.3h3.1v3.1h-3.1zm-3.2 0h3.1v3.1h-3.1zm3.2-3.2h3.1v3.1h-3.1z'/%3E%3Cpath class='st1' d='M29.4 26.3h3.1V20M20 32.5h6.3v-3.1'/%3E%3Cg%3E%3Cpath class='st1' d='M.5 29.4h3.1v3.1H.5zm3.1-3.1h3.1v3.1H3.6zm0-3.2h3.1v3.1H3.6zm3.2 3.2h3.1v3.1H6.8zM6.8 29.4v3.1H13M.5 20v6.3h3.1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

  /* Degrees of success */
  --degree-success-critical: rgb(0, 128, 0);
  --degree-success: rgb(0, 0, 255);
  --degree-failure: rgb(255, 69, 0);
  --degree-failure-critical: red;

  /* Value adjustments (e.g. weak/elite) */
  --adjusted-higher: #009988;
  --adjusted-lower: #cc3311;
}

[data-chat-app-theme] #chat-log ~ *,
[data-dorako-ui-theme] {
  --input-background-color: var(--color-cool-4);
  --input-border-color: transparent;
  --input-border-color: var(--color-cool-3);
  --input-focus-text-color: var(--color-light-2);
  --input-text-color: var(--color-light-3);
  --input-placeholder-color: var(--color-light-4);
  --input-text-selection-color: var(--color-cool-3);
  --input-focus-outline-color: var(--color-cool-3);
  --icon-border-color: var(--color-warm-2);
  --box-shadow: 0px 1px 3px 1px black;
  --app-text-shadow: 0px 1px 2px black;
  --window-app-box-shadow: 0px 5px 20px 3px black, 0px 0px 50px 30px var(--color-warm-3-10),
    0px 0px 30px 20px var(--color-warm-2-20), 0px 0px 10px 05px var(--color-warm-1-40);

  ::-webkit-scrollbar-thumb {
    outline: none;
    border-radius: 3px;
    background: var(--color-scrollbar);
    border: 1px solid var(--color-scrollbar-border);
    transition: outline 0.15s;
    &:hover {
      border: 1px solid var(--color-scrollbar);
      background: var(--color-scrollbar-hover);
    }
  }

  ::-webkit-scrollbar-track {
    box-shadow: 0 0 1px var(--color-cool-3) inset;
    box-shadow: unset;
    border-radius: 4px;
  }

  input[type="checkbox"]:checked,
  input[type="radio"]:checked {
    accent-color: var(--accent-color);
  }

  code {
    background: var(--color-cool-4);
    border: 1px solid var(--color-cool-3);
    color: var(--color-light-2);
    border-radius: 3px;
    padding: 0px 2px;
  }

  a.content-link,
  [data-pf2-check]:not([data-pf2-traits*="secret"]),
  a.entity-link,
  [data-pf2-action],
  span[data-pf2-effect-area],
  a.inline-check:not([data-pf2-traits*="secret"]),
  a.inline-check:not([data-pf2-traits*="secret"]) .label,
  a.inline-roll {
    background: var(--inline-bg);
    border: 1px solid var(--inline-border-color);
    color: var(--inline-text-color) !important;
    box-shadow: var(--inline-box-shadow);

    &::before,
    i,
    i.icon {
      color: var(--inline-icon-color);
    }
  }
  [data-pf2-check][data-pf2-traits*="secret"],
  [data-visibility]:not([data-visibility="all"])[data-visibility="gm"] {
    color: black;
  }

  i[data-pf2-repost] {
    @include quick-transition;
    cursor: pointer;
    background: unset;
    border-left: unset;
    &:hover::before {
      color: var(--color-warm-2);
    }
  }

  &.pf2e.item.sheet form .sheet-body fieldset.basics {
    background: none !important;
    border: none !important;
  }
}

/* ------------------------------------------------------------ */
/* Generalized style choices (exlusive of limited scope)        */
/* ------------------------------------------------------------ */

[data-dorako-ui-theme][data-dorako-ui-scope="unlimited"][data-color-scheme="dark"] {
  h1 {
    color: var(--color-light-1);
  }
  h2 {
    color: var(--color-light-1);
  }
  h3 {
    color: var(--color-light-1);
  }
  h4 {
    color: var(--color-light-2);
  }
  h5 {
    color: var(--color-light-2);
  }
  h6 {
    color: var(--color-light-2);
  }
}

[data-dorako-ui-theme][data-dorako-ui-scope="unlimited"] {
  color: var(--color-light-3);

  input[type="text"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  input[type="time"],
  input[type="search"] {
    min-width: 24px;
  }

  fieldset {
    border: 1px solid var(--fieldset-border-color) !important;
    background: var(--fieldset-background-color) !important;
    border-radius: var(--border-radius);
    > legend {
      color: var(--fieldset-legend-color);
      text-shadow: unset;
    }
  }
  input[type="range"] {
    background: none !important;
    --input-focus-outline-color: transparent;
    --input-border-color: transparent;
    --box-shadow: none;
  }
  input[type="range"]::-webkit-slider-runnable-track {
    box-shadow: unset;
    border-radius: 3px;
    background: var(--color-cool-5);
    border: 1px solid var(--color-cool-4);
  }

  input[type="range"]::-webkit-slider-thumb {
    border-radius: 50%;
    box-shadow: unset;
  }

  input[type="range"]:disabled::-webkit-slider-thumb {
    background: color-mix(in srgb, var(--accent-color) 50%, black);
    border: 1px solid color-mix(in srgb, var(--accent-color-light) 50%, black);
  }

  input[type="range"]:not(:disabled)::-webkit-slider-thumb {
    background: var(--accent-color);
    border: 1px solid var(--color-warm-1);
  }

  input[type="color"][data-edit] {
    border: 1px solid var(--color-border-light-highlight);
    border-radius: var(--border-radius);
  }

  input[type="color" i]::-webkit-color-swatch {
    border-color: var(--color-cool-4);
  }

  input[type="range"] + .range-value {
    flex: none;
    height: 24px;
    padding: 0 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    background: var(--accent-color);
    border: 1px solid var(--color-warm-1);
    color: var(--color-light-1);
    text-shadow: 0px 1px 2px black;
    box-shadow: var(--box-shadow);
    border-radius: 3px;
    font-size: var(--font-size-12);
  }

  a.button,
  button:not(.pm-dropdown) {
    @include f2-button-warm;
  }
  .prosemirror menu .pm-dropdown:hover i {
    color: black;
  }

  &.dialog .dialog-buttons button {
    @include f2-button-warm;
  }

  input[type="text"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  input[type="time"],
  input[type="search"],
  select:not(.tag) {
    @include f2-input;
  }

  textarea {
    color: var(--input-text-color);
    background: var(--input-background-color);
    border: var(--window-app-border-style);
    border-color: var(--input-border-color);
  }

  hr {
    border: none;
    border-top: 1px solid var(--app-border-color);
    border-bottom: 1px solid var(--color-cool-5);
  }

  &.dialog .dialog-buttons button.default {
    @include f2-button-warm;
  }

  [data-visibility]:not([data-visibility="all"]) {
    // outline: 1px dashed var(--color-scrollbar-border);
    color: black;
    text-shadow: none;
  }

  form .form-group .form-fields button {
    height: var(--form-field-height);
  }

  &.sheet header.sheet-header img {
    @include f2-app;
    border: 1px solid var(--icon-border-color);
  }

  &.sheet header.sheet-header h1 input {
    --font-size: inherit;
    font-size: 28px;
  }

  &.app.sidebar-popout .window-content {
    color: inherit;
  }
}

/* ----------------------------------------- */
/* App and Window-app                        */
/* ----------------------------------------- */

[data-dorako-ui-theme] {
  &.app {
    border-radius: var(--border-radius);
    background: unset;

    // warm inside
    // prettier-ignore
    // --warm-background: radial-gradient(circle at top, color-mix(in srgb, var(--color-warm-1) 20%, transparent), transparent),
    //                    radial-gradient(ellipse at bottom, color-mix(in srgb, var(--color-warm-3) 30%, transparent), transparent),
    //                    var(--app-background);
    // background: var(--warm-background);
    // border: 1px solid var(--color-warm-1);

    // cool
    background: var(--app-background);
    background-position: top;
    background-size: cover;
    border: var(--app-border-style);
    border-color: var(--app-border-color);

    // warm borders, no transparency
    // background: linear-gradient(var(--app-background), var(--app-background)) padding-box,
    //   linear-gradient(to bottom, var(--color-warm-1), var(--color-warm-3)) border-box;
    // border: 1px solid transparent;
  }

  &.window-app {
    background: var(--window-app-background);
    background-position: top;
    background-size: cover;
    border: var(--window-app-border-style);
    border-color: var(--window-app-border-color);
    backdrop-filter: blur(4px);
    // prettier-ignore
    // box-shadow: 0px 5px 20px 3px black, 0px 0px 50px 30px color-mix(in srgb, var(--color-warm-3) 10%, transparent), 0px 0px 30px 20px color-mix(in srgb, var(--color-warm-2) 20%, transparent), 0px 0px 10px 05px color-mix(in srgb, var(--color-warm-1) 40%, transparent);
    // Electron app bug
    box-shadow: var(--window-app-box-shadow);

    &.sidebar-popout {
      border: var(--app-border-style);
      box-shadow: var(--box-shadow);
    }

    .window-header {
      flex: 0 0 27px;
      border: unset;
      text-shadow: 0px 1px 2px black;
      border-radius: var(--border-radius) var(--border-radius) 0px 0px;
    }

    .window-content {
      background: unset !important; // Stops modules from adding their own background
      box-shadow: unset;
    }

    .window-resizable-handle {
      background: var(--color-warm-4);
      border: 1px solid var(--window-app-border-color);
      border-radius: 4px 0px var(--border-radius) 0px;
      border-bottom-color: var(--color-warm-3);
      border-right-color: var(--color-warm-3);
      bottom: -1px;
      right: -1px;
    }
  }
}

/* ----------------------------------------- */
/* Application specific                      */
/* ----------------------------------------- */

[data-dorako-ui-theme] {
  &.token-sheet,
  &.dialog {
    height: auto !important;
  }

  &.token-sheet nav.sheet-tabs.secondary-tabs {
    margin-top: 2px;
  }

  .inline-roll .dice-tooltip {
    background: var(--app-background);
    border: 1px solid var(--color-warm-1);
    box-shadow: 0px 0px 6px var(--color-warm-2), 0px 2px 8px 1px var(--color-warm-3);
    backdrop-filter: blur(5px);
    border-radius: var(--border-radius);
    -webkit-backdrop-filter: blur(5px);
    font-size: var(--font-size-16);
    line-height: var(--font-size-16);
    text-shadow: 0px 1px 2px black;
    padding: 0.4em 0.6em;
  }

  #chat-controls .roll-type-select {
    @include f2-input;
    margin: 0px;
  }

  &.filepicker .favorites .paths {
    box-shadow: unset;
    border: 1px solid var(--color-cool-3);
    background: var(--color-cool-5-50);
    .path {
      @include f2-button-cool;
      border-radius: 3px;
    }
  }

  &.filepicker .current-dir button {
    height: 32px;
  }

  &.package-configuration aside.sidebar {
    border: unset;
    nav.tabs {
      gap: 5px;
      .category-tab {
        @include f2-button-warm;
        padding: 4px 8px;
        margin: 1px 4px;
      }
    }
  }

  &.sheet nav.sheet-tabs {
    border: none;
  }

  .directory .action-buttons button {
    box-shadow: var(--box-shadow);
  }

  .directory .directory-header .header-search input {
    @include f2-input;
  }

  .directory .action-buttons button,
  .settings-sidebar button {
    @include f2-button-warm;
  }
}

/* ----------------------------------------- */
/* Core overwrites                           */
/* ----------------------------------------- */
[data-dorako-ui-theme][data-color-scheme="dark"] {
  &.app.token-sheet .tab.active[data-tab="appearance"] fieldset {
    border-color: var(--color-cool-3);
    > legend {
      color: var(--color-light-2);
    }
  }
}

[data-dorako-ui-theme] {
  &.window-app .tabs .item {
    @include f2-button-warm;
    padding: 4px 8px;
  }

  &.sheet nav.sheet-tabs {
    gap: 5px;
  }
  // &.sheet nav.sheet-tabs .item {
  //   // --button-border-color: transparent; // bad foundry default
  //   --button-border-color: var(--color-cool-4);
  // }
}

/* ----------------------------------------- */
/* Journals                                  */
/* ----------------------------------------- */

[data-dorako-ui-theme] {
  &.sheet.journal-entry .journal-entry-content {
    background: unset;
    border: unset;
  }

  &.journal-sheet .journal-header .title {
    @include f2-input;
    // background: var(--color-cool-4);
  }

  .editor-edit {
    @include f2-button-warm;
    border-radius: 3px;
    padding: 2px 5px;
  }

  table:not(.pf2-table) tr:nth-child(even) {
    background: color-mix(in srgb, var(--color-cool-3) 20%, transparent);
  }
}

/* ----------------------------------------- */
/* Tagify and tags                           */
/* ----------------------------------------- */

[data-dorako-ui-theme] {
  .tagify,
  tags.tagify.pf2e-tagify {
    --tags-disabled-bg: #f1f1f1;
    --tags-border-color: #ddd;
    --tags-hover-border-color: #ccc;
    --tags-focus-border-color: #3595f6;
    --tag-border-radius: 3px;
    --tag-bg: #e5e5e5;
    --tag-hover: #d3e2e2;
    --tag-text-color: black;
    --tag-text-color--edit: black;
    --tag-pad: 0.3em 0.5em;
    --tag-inset-shadow-size: 1.1em;
    --tag-invalid-color: #d39494;
    --tag-invalid-bg: rgba(211, 148, 148, 0.5);
    --tag-remove-bg: rgba(211, 148, 148, 0.3);
    --tag-remove-btn-color: black;
    --tag-remove-btn-bg: none;
    --tag-remove-btn-bg--hover: #c77777;
    --input-color: inherit;
    --tag-hide-transition: 0.3s;
    --placeholder-color: rgba(0, 0, 0, 0.4);
    --placeholder-color-focus: rgba(0, 0, 0, 0.25);

    --tag-bg: var(--color-warm-2);
    --tags-hover-border-color: var(--color-cool-3);
    --tag-color: var(--color-light-2);

    --tag-bg: var(--color-cool-4);
    --tag-border-color: var(--color-border-medium);
    --tags-border-color: var(--color-border-medium);

    border: 1px solid var(--tags-border-color);
    border-radius: 3px;

    &.tagify--empty .tagify__input::before {
      color: var(--color-light-5);
    }

    background: var(--color-cool-4);
    &:hover {
      box-shadow: unset;
    }
    select.tag {
      border-width: 1px 1px 1px 1px;
      // height: var(--font-size-23);
    }

    tag {
      border-radius: 4px;
      border: 1px solid var(--tag-border-color);
    }
    tag .tagify__tag__removeBtn {
      width: 12px;
      height: 12px;
      font: 12px/1 Arial;
    }
    tag .tagify__tag__removeBtn,
    tag > div .tagify__tag-text {
      color: var(--tag-color);
    }
  }
}

/* ----------------------------------------- */
/* System overwrites                         */
/* ----------------------------------------- */
[data-dorako-ui-theme][data-color-scheme="dark"] {
  &.pf2e.item.sheet {
    --color-text-dark-2: var(--color-light-3);
    --color-text-dark-4: var(--color-light-3);
    --color-text-dark-input: var(--color-light-3);
    --color-border-dark: var(--color-light-2);
    --color-border-medium: var(--color-cool-3);
  }
}

[data-dorako-ui-theme] {
  --visibility-gm-bg: #e8e8efaa;
  --visibility-owner-bg: #ddebe1aa;

  table.pf2-table {
    text-shadow: none;
  }

  [data-visibility]:not([data-visibility="all"])[data-visibility="gm"] [data-visibility="gm"] {
    background: none;
  }

  &.pf2e.item.sheet {
    input {
      @include f2-input;
    }
  }
  &.pf2e.item.sheet form .tab.active.rules .rule-form .rule-element-header .priority input {
    width: 5ch;
  }

  &.pf2e.item.sheet form .sheet-content section.sidebar .item-summary,
  &.pf2e.item.sheet form .sheet-content section.sheet-sidebar .item-summary {
    color: var(--color-text-dark-secondary);
  }

  &.pf2e.item.sheet .sheet-header .details {
    align-items: center;
  }

  &#generate-check-prompt {
    nav h4 a {
      @include f2-button-warm;
      padding: 4px 8px;
    }

    .dialog-content tags.tagify {
      --tags-disabled-bg: #f1f1f1;
      --tags-border-color: #ddd;
      --tags-hover-border-color: #ccc;
      --tags-focus-border-color: #3595f6;
      --tag-border-radius: 3px;
      --tag-bg: #e5e5e5;
      --tag-hover: #d3e2e2;
      --tag-text-color: black;
      --tag-text-color--edit: black;
      --tag-pad: 0.3em 0.5em;
      --tag-inset-shadow-size: 1.1em;
      --tag-invalid-color: #d39494;
      --tag-invalid-bg: rgba(211, 148, 148, 0.5);
      --tag-remove-bg: rgba(211, 148, 148, 0.3);
      --tag-remove-btn-color: black;
      --tag-remove-btn-bg: none;
      --tag-remove-btn-bg--hover: #c77777;
      --input-color: inherit;
      --tag-hide-transition: 0.3s;
      --placeholder-color: rgba(0, 0, 0, 0.4);
      --placeholder-color-focus: rgba(0, 0, 0, 0.25);

      --tag-bg: var(--color-warm-2);
      --tags-border-color: var(--color-cool-4);
      --tags-hover-border-color: var(--color-cool-3);
      --tag-color: var(--color-light-2);

      --tag-bg: var(--color-cool-4);
      --tag-border-color: var(--color-cool-3);
      --tags-border-color: var(--color-cool-3);

      border: 1px solid var(--tag-border-color);
      border-radius: 3px;
    }
  }

  &.pf2e.item.sheet form .form-list,
  &.pf2e.item.sheet form section.sheet-body fieldset {
    border-color: var(--color-cool-3);
    > legend {
      color: var(--color-light-2);
    }
    &.basics {
      border-color: transparent;
    }
  }

  section.compendium-sidebar ol.directory-list ol.document-matches li.match {
    .thumbnail img {
      @include f2-app;
      padding: 0px;
    }
    &:hover .thumbnail img {
      border: var(--app-border-style);
      border-color: var(--color-warm-2);
    }
  }

  &.pf2e.item.sheet form .sheet-body .tab.active.description .editor:hover a.add-gm-notes {
    display: flex;
  }

  &.pf2e.item.sheet form .sheet-body .tab.active.description .editor a.add-gm-notes {
    @include f2-button-warm;
    border-radius: 3px;
    align-content: center;
    justify-content: center;
    right: 40px;
    height: 28px;
    width: 28px;
    background-color: var(--color-warm-4);
    border-color: var(--color-warm-3);
    > i {
      margin-top: 3px;
    }
  }

  &.pf2e.item.sheet form .sheet-body .tab.active.description .editor a.editor-edit {
    @include f2-button-cool;
    border-radius: 3px;
    // display: flex;
    align-content: center;
    justify-content: center;
    height: 28px;
    width: 28px;
  }

  &.pf2e.item.sheet form .sheet-content input[type="text"],
  &.pf2e.item.sheet form .sheet-content input[type="number"],
  &.pf2e.item.sheet form .sheet-content select,
  &.pf2e.item.sheet form section.sheet-body input[type="text"],
  &.pf2e.item.sheet form section.sheet-body input[type="number"] {
    @include f2-input;
  }

  &.pf2e.item.sheet .sheet-header input[type="text"],
  &.pf2e.item.sheet .sheet-header input[type="number"] {
    @include f2-input;
  }

  &.pf2e.item.sheet form .sheet-body .tab.active.details select,
  &.pf2e.item.sheet form .sheet-body .tab.active.details fieldset.publication .data .license select,
  &.pf2e.item.sheet form .sheet-content section.sidebar select {
    @include f2-input;
  }

  &.pf2e.item.sheet form .sheet-content button:hover:not(:disabled),
  &.pf2e.item.sheet form .sheet-content button:focus {
    border: 1px solid var(--button-border-color);
    box-shadow: unset;
  }

  &.pf2e.item.sheet form .sheet-content input:not([type="range"], [type="checkbox"]):hover:not(:disabled),
  &.pf2e.item.sheet form .sheet-content input:not([type="range"], [type="checkbox"]):focus,
  &.pf2e.item.sheet form .sheet-content select:hover:not(:disabled),
  &.pf2e.item.sheet form .sheet-content select:focus {
    @include f2-input;
  }

  &.pf2e.item.sheet form .tab.active.rules .rule-form .rules-drop-container .rules-drop-zone {
    @include f2-app;
    --text-dark: var(--color-light-3);
  }
  &.pf2e.item.sheet form .tab.active.rules .rule-form .rules-drop-container .rules-drop-zone i {
    @include f2-app;
  }

  &.pf2e.item.sheet.action form .drop-zone {
    @include f2-app;
  }

  &.pf2e.item.sheet.action form .drop-zone a.content-link,
  &.pf2e.item.sheet.action form .drop-zone picture,
  &.pf2e.item.sheet.action form .drop-zone img {
    @include f2-app;
  }

  &.pf2e.item.sheet .sheet-header {
    border: unset;
  }

  &.pf2e.item.sheet form > nav {
    border: unset;
    .sheet-tabs {
      gap: 5px;
      margin: 2px;
      > a {
        @include f2-button-warm;
      }
    }
  }

  &.pf2e.item.sheet form .tab.active.rules .rule-form nav.rule-tabs {
    border: unset;
    h4 {
      > a {
        @include f2-button-warm;
        padding: 5px 10px;
      }
    }
  }

  &.pf2e.item.sheet form .effects-container,
  &.pf2e.item.sheet form .details-container,
  &.pf2e.item.sheet form .dice-data {
    gap: 5px;
    align-items: center;
  }

  &.pf2e.item.sheet form section.sheet-body .item-mystification.active .mystification-status label {
    color: var(--color-text-dark-4); // System using hardcoded color
  }

  &.pf2e.item.sheet form .sheet-body .tab.active.description .gm-notes,
  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .gm-notes {
    @include f2-app;
    background-color: var(--visibility-gm-bg);
    border-style: dashed;
    border-color: var(--color-warm-4);
    text-shadow: none;
    color: black;
  }

  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .editor a.add-gm-notes,
  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .editor a.editor-edit {
    background: var(--color-cool-4);
    border: 1px solid var(--color-cool-3);
    color: var(--color-light-2);
  }

  &.pf2e.item.sheet form .sheet-body .tab.mystification.active .unidentified img {
    @include f2-app;
    border: 1px solid;
    border-color: var(--icon-border-color);
  }

  &.pf2e.item.sheet .sheet-header img {
    @include f2-app;
    --app-border-style: 1px solid;
    border-color: var(--icon-border-color);
    border-radius: var(--border-radius);
    margin-left: 2px;
    margin-top: 2px;
  }

  &.pf2e.item.sheet form .tab.active.rules .rule-form .attached-input .attachment,
  &.pf2e.item.sheet form .item-rules .rule-form .attached-input .attachment {
    --button-border-color: var(--color-warm-2);
    --button-background-color: var(--color-warm-3);
    --button-hover-border-color: var(--color-warm-4);
    --button-hover-background-color: var(--color-warm-5);
    --button-text-color: var(--color-light-2);
    --box-shadow: none;
    border-color: var(--button-border-color);
    z-index: 1;
  }

  &.pf2e.item.sheet form .item-rules .rule-form .attached-input input,
  &.pf2e.item.sheet form .item-rules .rule-form .attached-input tags {
    border-left: unset;
    &:hover {
      border-left: unset;
    }
  }

  .tox .tox-sidebar-wrap {
    background-color: white;
  }
  .tox.tox-tinymce .tox-tbtn {
    --button-background-color: white;
    --button-hover-background-color: gray;
    --app-text-shadow: none;
    --box-shadow: none;
    color: black;
  }
}
