.dorako-ui.dark-theme {
  &.filepicker .favorites .path {
    background: none;
  }

  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .editor a {
    &.add-gm-notes,
    &.editor-edit {
      @include glass;
      @include quick-transition;
      text-shadow: 0 0 3px black;
      color: var(--color-text-light-heading);

      &:hover {
        @include glass; // re-included glass to set potential borders to none etc.
        background-color: var(--primary);
        color: var(--color-text-light-highlight);
        box-shadow: var(--glassy); // Overrides prosemirror, possibly other stuff
      }
    }
    &.add-gm-notes {
      background-color: #2e0587;
      &:hover {
        background-color: #440eb9;
      }
    }
  }
  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .gm-notes {
    background-color: #2e0587;
    border: 1px dashed #440eb9;
    padding: 4px;
    border-radius: 15px;
  }

  &.pf2e.item.sheet form section.sheet-body .item-description .descriptions .tox-tinymce {
    background-color: #440eb9;
    background-blend-mode: luminosity;
  }
}

.dorako-ui.dark-theme #sidebar .settings-sidebar {
  button {
    @include glass;
    @include quick-transition;
    text-shadow: 0 0 3px black;
    background-color: var(--glass-bg-light);
    color: var(--color-text-light-heading);

    &:hover {
      background-color: var(--glass-bg);
      color: var(--color-text-light-highlight);
    }
  }
}

.dorako-ui.dark-theme.dialog .dialog-buttons button.default {
  background-color: var(--secondary);
  border: none;

  &:hover {
    background-color: var(--secondary-light);
  }
}

.dorako-ui.dark-theme {
  .tox-tinymce {
    @include sheet;
    background-image: var(--sheet-light);
    box-shadow: 0 0 0 1px var(--tertiary), 0 0 0 2px var(--gold-brown), 0px 4px 10px black;
    &.tox:not(.tox-tinymce-inline) .tox-editor-header {
      padding-top: 0px;
    }
  }
}

.dorako-ui.dark-theme {
  form .form-group.buttons {
    gap: 5px;
  }
}

.dorako-ui.dark-theme.app.choice-set-prompt section.window-content .choices .drop-zone span {
  color: white;
}

.dorako-ui.dark-theme {
  --color-text-dark-primary: var(--color-text-light-heading);
}

// Sidebar "grey"
// prettier-ignore
.dorako-ui.dark-theme {
  &.pf2e.item.sheet form article.sheet-content > section.sheet-sidebar .item-summary,
  &.pf2e.item.sheet form article.sheet-content > section.sheet-sidebar .inventory-details label,
  &.pf2e.item.sheet form article.sheet-content > section.sheet-sidebar .feat-details label {
    color: var(--color-text-light-heading);
  }
}

// .dorako-ui.dark-theme {
//   #tinymce {
//     color: var(--color-text-light-heading);
//   }
// }

.dorako-ui.dark-theme.pf2e.item.sheet form .item-rules .rule-form .attached-input {
  button {
    background-color: var(--primary-dark);
    border: none;
  }
  input {
    border-radius: 0px 3px 3px 0px;
  }
}

.dorako-ui.dark-theme:not(.premium) .window-content {
  @include sheet;
  color: var(--color-text-light-heading);
}
.dorako-ui.light-theme:not(.premium) .journal-entry-content {
  --color-text-dark-primary: #191813;
  color: var(--color-text-dark-primary);
}
.dorako-ui.dark-theme.window-app.chat-popout .window-content {
  background: unset;
  box-shadow: unset;
}

.dorako-ui.dark-theme:not(.premium).window-app {
  // ::placeholder {
  //     color: var(--color-text-light-heading);
  // }

  footer.flexrow {
    gap: 3px;
  }

  .window-content {
    // Avoid margins from sheet
    box-shadow: 0 0 0 1px var(--gold-brown) inset, 0 0 0 2px var(--tertiary) inset;
    background-image: var(--sheet-dark);
    color: var(--color-text-light-heading);
  }

  &#module-management {
    .package-list .package-title,
    .package-list .package-metadata,
    .package-list .package-description {
      color: var(--color-text-light-highlight);
    }
  }
  &.package-configuration aside.sidebar {
    border: none;
  }

  &.sheet header.sheet-header img {
    box-shadow: var(--gold-and-glow);
    border-radius: 5px;
  }

  textarea {
    color: white;
    border: 1px solid var(--tertiary);
  }

  a[href] {
    color: var(--tertiary-dark);
  }

  hr {
    border-top: 1px solid var(--tertiary);
    border-bottom: 1px solid black;
  }

  &.sheet footer.sheet-footer {
    gap: 5px;
  }

  .compendium.directory .directory-list .directory-item {
    border: none;
  }

  button:not(.tox-tbtn) {
    @include glass;
    @include quick-transition;
    text-shadow: 0 0 3px black;
    color: var(--color-text-light-heading);

    &:hover {
      @include glass; // re-included glass to set potential borders to none etc.
      background-color: var(--primary);
      color: var(--color-text-light-highlight);
      box-shadow: var(--glassy); // Overrides prosemirror, possibly other stuff
    }

    &.privacy {
      background-color: #2e0587;
      &:hover {
        color: var(--color-text-light-heading);
        background-color: #440eb9;
      }
    }

    &.pm-dropdown {
      ul {
        @include glass;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
      }

      li {
        &:hover {
          background: rgba(0, 0, 0, 0.5);
        }
      }

      i {
        color: var(--color-text-light-heading);
      }

      &:hover i {
        color: var(--color-text-light-highlight);
      }
    }
  }

  .private {
    button.privacy {
      color: var(--color-text-light-highlight);
      background-color: #440eb9;
    }
  }

  &.token-sheet .form-group.children-disabled .range-value,
  input[type="range"] + .range-value {
    @include glass;
    background-color: rgba(0, 0, 0, 0.8);
    color: var(--color-text-light-heading);
  }

  input[type="checkbox"],
  input[type="radio"] {
    accent-color: var(--tertiary);
    &:checked {
      box-shadow: unset;
      accent-color: var(--tertiary);
      filter: none;
    }
  }

  // input[type="checkbox"],
  // input[type="radio"],
  input[type="text"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  input[type="time"],
  input[type="search"] {
    &:not(.dorako-ui-skip) {
      @include glass;
      padding-left: 5px;
      color: var(--color-text-light-heading);
      accent-color: var(--tertiary);

      &:checked {
        box-shadow: unset;
        accent-color: var(--tertiary);
        filter: none;
      }

      &:hover {
        @include glass; // pf2e styling disables box-shadow
        background-color: var(--secondary-dark);
        color: var(--color-text-light-highlight);
      }

      &:focus {
        @include glass; // pf2e styling disables box-shadow
        background-color: var(--secondary);
        color: white;
      }

      &:disabled {
        color: var(--color-border-dark-tertiary);
        background-color: rgba(0, 0, 0, 0.8);
        &:hover {
          color: var(--color-border-dark-tertiary);
          background-color: rgba(0, 0, 0, 0.8);
        }
      }
    }
  }

  select:not(.dorako-ui-skip) {
    @include glass;
    @include quick-transition;
    color: var(--color-text-light-heading);

    &:hover {
      background-color: var(--secondary-dark);
      color: var(--color-text-light-highlight);
    }

    option {
      background-color: rgb(37, 37, 37);
      color: var(--color-text-light-heading);
    }

    optgroup {
      background-color: rgb(37, 37, 37);
      color: var(--color-text-light-highlight);
    }
  }

  input[type="color"][data-edit] {
    border: none;
  }

  //   &.token-sheet .tab.active[data-tab="appearance"] fieldset > legend {
  //     color: var(--color-text-light-highlight);
  //   }

  //   fieldset,
  //   &.app.token-sheet .tab.active[data-tab="appearance"] fieldset {
  //     border: 1px solid var(--tertiary);
  //     border-radius: 5px;
  //   }

  //   &.sheet nav.sheet-tabs {
  //     border-top: 1px solid var(--tertiary);
  //     border-bottom: 1px solid var(--tertiary);
  //   }

  form .form-group.slim .form-fields > label,
  form .form-group span.units,
  form .notes,
  form .hint {
    color: #a9a798; // darker than --color-text-light-heading
  }

  &.filepicker .private .directory,
  &.filepicker .public .private.dir {
    background: rgba(115, 49, 255, 0.15);
  }

  &.filepicker .display-modes a {
    @include glass;
    color: var(--color-text-light-highlight);
    text-shadow: 0 0 3px black;

    &:hover {
      background: var(--primary);
      color: var(--color-text-light-highlight);
    }

    &.active {
      background: var(--primary);
      color: var(--color-text-light-highlight);
      text-shadow: 0 0 3px black;
    }
  }

  &#world-clock section.window-content .input-grid button {
    img {
      border: none;
      height: 1.5em;
      filter: invert(1) sepia() brightness(0.8) drop-shadow(0px 0px 3px black);
    }
    &:hover img {
      filter: invert(1) sepia() brightness(0.9) drop-shadow(0px 0px 3px black);
    }
  }

  &#keybindings .binding .key {
    @include glass;
    @include quick-transition;
    color: var(--color-text-light-heading);
    text-shadow: 0 0 3px black;

    &:hover {
      background-color: var(--primary);
      color: var(--color-text-light-highlight);
    }
    &.uneditable {
      background-color: rgba(0, 0, 0, 0.8);
      &:hover {
        color: var(--color-text-light-heading);
        background-color: rgba(0, 0, 0, 0.8);
      }
    }
  }

  &#invitation-links .connection {
    &.closed {
      color: rgb(255 0 19 / 60%);
    }
    &.open {
      color: green;
    }
    &.unknown {
      color: rgba(250, 219, 60, 0.814);
    }
  }
}

/* ------------------------------------------------- */
/* Dark theme journals + Critical hit/fumble deck    */
/* ------------------------------------------------- */

.app.journal-entry:not(.premium) .window-content .journal-entry-content.dorako-ui.dark-theme {
  background: var(--sheet-dark);
  color: var(--color-text-light-heading);

  table.pf2-table tr:nth-child(odd) {
    background-color: #313131;
  }
  table.pf2-table tr:nth-child(2n) {
    background-color: #5d5d5d;
  }

  .journal-header .title {
    color: var(--color-text-light-highlight);
  }

  h1,
  h2,
  h3,
  h4 {
    color: var(--color-text-light-highlight);
  }

  .journal-entry-page .journal-page-content .fumble-deck code,
  .journal-entry-page .journal-page-content .fumble-deck h1,
  .journal-entry-page .journal-page-content .critical-deck h1,
  .journal-entry-page .journal-page-content .critical-deck code {
    color: black;
  }

  .journal-entry-page .journal-page-content .critical-deck,
  .journal-entry-page .journal-page-content .fumble-deck {
    blockquote {
      box-shadow: var(--glassy);
    }

    h1 {
      box-shadow: var(--gold-and-glow);
      margin-left: 2px;
    }
  }
}
